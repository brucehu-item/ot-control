# 加班记录页面设计

## 页面功能
加班记录页面是系统的核心功能页面之一，提供加班申请的查看、搜索、审批等功能。根据不同用户角色（`WORKER`、`SUPERVISOR`、`MANAGER`、`CUSTOMER`）展示不同的操作权限。

## 页面布局
- 页面标题区域：显示"加班记录"标题和新建按钮（仅`WORKER`角色可见）
- 搜索区域：包含搜索条件表单
- 表格区域：展示加班记录列表
- 分页区域：位于表格底部
- 详情弹窗：查看加班申请详细信息
- 审批弹窗：处理加班申请审批

## 页面导航
- 点击"新建加班申请"跳转到创建页面（`/overtime/create`）
- 登录失效时自动跳转到登录页面

## 页面元素

### 搜索区域
- 时间范围选择器
  - 类型：日期范围选择器
  - 快捷选项：最近一周、最近一月、最近三月
  
- 申请状态选择器
  - 可选值：待主管审批、主管已通过、待经理审批、待客户审批、已通过、已拒绝、已取消
  
- 部门选择器（仅`MANAGER`角色可见）
  - 数据来源：动态获取部门列表

- 搜索和重置按钮
  - 主色调：紫色

### 表格区域
- 表格列：
  - 申请编号
  - 申请人
  - 部门
  - 场所
  - 开始时间
  - 结束时间
  - 加班时长
  - 状态（使用不同颜色标签展示）
  - 创建时间
  - 操作列（固定在右侧）

- 操作按钮：
  - 查看：所有角色可见
  - 取消：符合取消权限时可见
  - 审批：符合审批权限时可见

### 详情弹窗
- 基本信息展示
  - 申请编号
  - 申请人
  - 部门
  - 场所
  - 状态
  - 时间信息
  - 加班原因

- 审批流程时间线
  - 审批人信息
  - 审批结果
  - 审批意见
  - 审批时间

### 审批弹窗
- 申请基本信息展示
- 审批结果选择（通过/拒绝）
- 审批意见输入框
- 确定/取消按钮

## 页面交互效果

### 表格交互
- 斑马纹样式
- 鼠标悬浮行背景色变化
- 固定右侧操作列

### 状态标签
- 不同状态显示不同颜色
  - 已通过：绿色
  - 待审批：蓝色
  - 审批中：黄色
  - 已拒绝：红色

### 按钮交互
- 主按钮使用紫色主题
- 链接按钮悬浮效果
- 操作按钮权限控制

### 分页组件
- 可选每页显示数量：5/10/20/50/100
- 支持页码跳转
- 显示总记录数

## 页面数据与API对接

### 数据获取
- 获取加班记录列表：GET /api/overtime/requests
- 获取用户信息：GET /api/auth/current-user
- 获取部门列表：GET /api/organization/departments

### 数据处理
- 加班记录列表：
  - 支持分页
  - 支持条件筛选
  - 计算加班时长
  - 格式化时间显示

- 权限控制：
  - 根据用户角色初始化搜索条件
  - 控制操作按钮显示
  - 控制可见数据范围

### 操作处理
- 取消申请：POST /api/overtime/cancel
- 审批处理：POST /api/overtime/approve
- 状态更新后自动刷新列表

### 安全考虑
- 用户信息本地缓存
- Token失效自动跳转登录
- 操作权限严格控制 