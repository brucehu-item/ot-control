# 组织管理页面设计

## 页面功能
提供组织架构的管理功能，包括场所、部门、用户的创建、编辑、删除等操作。

## 页面布局
- 顶部栏：
  - 左侧：系统Logo
  - 右侧：
    - 当前用户信息
      - 用户头像
      - 用户名
      - 所属部门
    - 登出按钮
- 顶部：页面标题和面包屑导航
- 左侧：组织架构树
- 右侧：详情内容区
  - 场所管理
  - 部门管理
  - 用户管理

## 页面导航
- 面包屑：首页 > 系统管理 > 组织管理
- 树节点切换：更新右侧内容
- 操作完成：刷新当前视图

## 页面元素

### 组织架构树
- 树形控件
  - 场所节点
  - 部门节点
  - 用户节点
  
- 搜索框
  - 支持模糊搜索
  - 高亮匹配结果
  
- 操作按钮
  - 展开/收起
  - 刷新

### 场所管理
- 场所列表
  - 场所名称
  - 经理
  - 部门数量
  - 员工数量
  - 创建时间
  - 操作列
    - 编辑
    - 删除
    
- 新增场所表单
  - 场所名称
  - 经理选择
  - 备注信息

### 部门管理
- 部门列表
  - 部门名称
  - 所属场所
  - 主管
  - 员工数量
  - 创建时间
  - 操作列
    - 编辑
    - 删除
    
- 新增部门表单
  - 部门名称
  - 所属场所
  - 主管选择
  - 备注信息

### 用户管理
- 用户列表
  - 用户名
  - 姓名
  - 角色
  - 所属部门
  - 所属场所
  - 状态
  - 操作列
    - 编辑
    - 删除
    - 重置密码
    
- 新增用户表单
  - 基本信息
    - 用户名
    - 姓名
    - 密码
    - 确认密码
  - 组织信息
    - 所属场所
    - 所属部门
    - 角色选择
  - 权限设置
    - 审批权限
    - 其他权限

## 页面交互效果

### 树形控件
- 节点展开/收起动画
- 节点选中高亮
- 右键菜单功能
- 拖拽调整结构

### 表单交互
- 表单验证
  - 必填项检查
  - 格式验证
  - 唯一性检查
  
- 联动效果
  - 场所选择影响部门选项
  - 角色选择影响权限选项
  
- 提交反馈
  - 提交loading
  - 成功/失败提示

### 批量操作
- 批量删除
- 批量修改部门
- 批量设置权限

## 页面数据与API对接

### API接口
- 场所相关
  - 获取场所列表：GET /api/v1/facilities
  - 创建场所：POST /api/v1/facilities
  - 更新场所：PUT /api/v1/facilities/{facilityId}
  - 删除场所：DELETE /api/v1/facilities/{facilityId}

- 部门相关
  - 获取部门列表：GET /api/v1/departments
  - 创建部门：POST /api/v1/departments
  - 更新部门：PUT /api/v1/departments/{departmentId}
  - 删除部门：DELETE /api/v1/departments/{departmentId}

- 用户相关
  - 获取用户列表：GET /api/v1/users
  - 创建用户：POST /api/v1/users
  - 更新用户：PUT /api/v1/users/{userId}
  - 删除用户：DELETE /api/v1/users/{userId}
  - 重置密码：POST /api/v1/users/{userId}/reset-password

### 数据处理
- 组织架构树
  - 本地缓存树状态
  - 懒加载子节点
  - 定时刷新数据
  
- 表单数据
  - 提交前验证
  - 本地缓存草稿
  - 防止重复提交
  
- 批量操作
  - 分批处理
  - 进度显示
  - 错误重试

### 权限控制
- 系统管理员
  - 可以管理所有场所
  - 可以创建系统管理员
  
- 场所经理
  - 只能管理本场所
  - 不能删除场所
  - 不能创建经理
  
- 部门主管
  - 只能查看本部门
  - 不能管理组织架构

### 其他功能
- 组织架构图
  - 可视化展示
  - 支持导出
  
- 数据导入导出
  - Excel导入
  - Excel导出
  - 数据校验
  
- 操作日志
  - 记录重要操作
  - 支持查询
  - 导出报表 